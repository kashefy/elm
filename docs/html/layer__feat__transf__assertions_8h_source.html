<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>ELM Library: layer_feat_transf_assertions.h Source File</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>


</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">ELM Library
   &#160;<span id="projectnumber">devel</span>
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('layer__feat__transf__assertions_8h.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">layer_feat_transf_assertions.h</div>  </div>
</div><!--header-->
<div class="contents">
<a href="layer__feat__transf__assertions_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/*M///////////////////////////////////////////////////////////////////////////////////////</span>
<a name="l00002"></a>00002 <span class="comment">//</span>
<a name="l00003"></a>00003 <span class="comment">// Copyright (c) 2015, Youssef Kashef</span>
<a name="l00004"></a>00004 <span class="comment">// Copyright (c) 2015, ELM Library Project</span>
<a name="l00005"></a>00005 <span class="comment">// 3-clause BSD License</span>
<a name="l00006"></a>00006 <span class="comment">//</span>
<a name="l00007"></a>00007 <span class="comment">//M*/</span>
<a name="l00010"></a>00010 <span class="preprocessor">#ifndef _ELM_TS_LAYER_FEAT_TRANSF_ASSERTIONS_H_</span>
<a name="l00011"></a>00011 <span class="preprocessor"></span><span class="preprocessor">#define _ELM_TS_LAYER_FEAT_TRANSF_ASSERTIONS_H_</span>
<a name="l00012"></a>00012 <span class="preprocessor"></span>
<a name="l00013"></a>00013 <span class="preprocessor">#include &quot;<a class="code" href="layer__assertions_8h.html">elm/ts/layer_assertions.h</a>&quot;</span>
<a name="l00014"></a>00014 <span class="preprocessor">#include &quot;<a class="code" href="signal_8h.html">elm/core/signal.h</a>&quot;</span>
<a name="l00015"></a>00015 
<a name="l00016"></a>00016 <span class="preprocessor">#include &lt;opencv2/core/core.hpp&gt;</span>
<a name="l00017"></a>00017 
<a name="l00018"></a>00018 <span class="keyword">extern</span> <span class="keyword">template</span> <span class="keyword">class </span>cv::Mat_&lt;float&gt;;
<a name="l00019"></a>00019 
<a name="l00020"></a>00020 <span class="keyword">namespace </span>elm {
<a name="l00021"></a>00021 
<a name="l00027"></a>00027 <span class="keyword">template</span> &lt;<span class="keyword">class</span> TLayer&gt;
<a name="l00028"></a><a class="code" href="classelm_1_1LayerFeatTransf__TP__.html">00028</a> <span class="keyword">class </span><a class="code" href="classelm_1_1LayerFeatTransf__TP__.html" title="A type-parameterized test case for repeating tests with different layer types derived from intermedia...">LayerFeatTransf_TP_</a> : public ::testing::Test
<a name="l00029"></a>00029 {
<a name="l00030"></a>00030 <span class="keyword">protected</span>:
<a name="l00031"></a><a class="code" href="classelm_1_1LayerFeatTransf__TP__.html#ad236ac827170176d8864cb6bf9e47739">00031</a>     <span class="keyword">virtual</span> <span class="keywordtype">void</span> SetUp()
<a name="l00032"></a>00032     {
<a name="l00033"></a>00033         <a class="code" href="classelm_1_1LayerConfig.html">LayerConfig</a> cfg;
<a name="l00034"></a>00034 
<a name="l00035"></a>00035         <a class="code" href="classelm_1_1LayerIONames.html" title="class for merging input/stimuli and output/response layer names">LayerIONames</a> io_names;
<a name="l00036"></a>00036 
<a name="l00037"></a>00037         <span class="keyword">typedef</span> std::vector&lt;std::string &gt; <a class="code" href="namespaceelm.html#acebbd34f9c41c07c407aca3a77311412" title="Convinience typedef for vector of strings.">VecS</a>;
<a name="l00038"></a>00038         <span class="keyword">using namespace </span>elm;
<a name="l00039"></a>00039         <a class="code" href="namespaceelm.html#a2b8eb7cd84832a6a64c0da7dad94304a" title="convinience typedef for a map of io keys and corresponding io name">MapIONames</a> io_pairs = <a class="code" href="structelm_1_1LayerAttr__.html" title="Layer Attributes struct, a helper struct for layer p-typed test cases.">LayerAttr_&lt;TLayer &gt;::io_pairs</a>;
<a name="l00040"></a>00040         VecS keys = <a class="code" href="namespaceelm.html#a639456db50fb0568bf034200fee2c8e4" title="List all keys in a map.">Keys</a>(io_pairs);
<a name="l00041"></a>00041 
<a name="l00042"></a>00042         <span class="keywordflow">for</span>(<span class="keywordtype">size_t</span> i=0; i&lt;keys.size(); i++) {
<a name="l00043"></a>00043 
<a name="l00044"></a>00044             std::string key = keys[i];
<a name="l00045"></a>00045             <a class="code" href="namespaceelm.html#ad02cf63865f194878427a1829f471da9" title="convinience typedef to layer io name with bool indicating input (0) or output (1)">IOName</a> _v = io_pairs.at(key);
<a name="l00046"></a>00046 
<a name="l00047"></a>00047             <span class="keywordflow">if</span>(_v.first == <a class="code" href="namespaceelm.html#ac5c73e977e493677f8bddc01b875db02a545de7206d5b4db861ab95949110fa41">LayerIOKeyType::INPUT</a>) {
<a name="l00048"></a>00048                 io_names.<a class="code" href="classelm_1_1LayerInputNames.html#ab75a4111ce419d386a198fae79913121" title="Set input key-name-pair.">Input</a>(key, _v.second);
<a name="l00049"></a>00049                 name_in_ = _v.second;
<a name="l00050"></a>00050             }
<a name="l00051"></a>00051             <span class="keywordflow">else</span> <span class="keywordflow">if</span>(_v.first == <a class="code" href="namespaceelm.html#ac5c73e977e493677f8bddc01b875db02a4ec4df54fa48cebdafa34d152f2ab55f">LayerIOKeyType::OUTPUT</a>) {
<a name="l00052"></a>00052                 io_names.<a class="code" href="classelm_1_1LayerOutputNames.html#ade749e4cb921bb81c37d0d2f804856aa" title="Set output key-name-pair.">Output</a>(key, _v.second);
<a name="l00053"></a>00053                 name_out_ = _v.second;
<a name="l00054"></a>00054             }
<a name="l00055"></a>00055         }
<a name="l00056"></a>00056 
<a name="l00057"></a>00057         layer_ptr_.reset(<span class="keyword">new</span> TLayer());
<a name="l00058"></a>00058         layer_ptr_-&gt;Reset(cfg);
<a name="l00059"></a>00059         layer_ptr_-&gt;IONames(io_names);
<a name="l00060"></a>00060     }
<a name="l00061"></a>00061 
<a name="l00062"></a>00062     <span class="comment">// members</span>
<a name="l00063"></a><a class="code" href="classelm_1_1LayerFeatTransf__TP__.html#a0de8070bec4bd562b47f59c798ea84ac">00063</a>     std::shared_ptr&lt;TLayer &gt; <a class="code" href="classelm_1_1LayerFeatTransf__TP__.html#a0de8070bec4bd562b47f59c798ea84ac" title="pointer to test object used in fixtures">layer_ptr_</a>; 
<a name="l00064"></a><a class="code" href="classelm_1_1LayerFeatTransf__TP__.html#a8f5a80a2da0c8a23712f93354e45a1fb">00064</a>     std::string <a class="code" href="classelm_1_1LayerFeatTransf__TP__.html#a8f5a80a2da0c8a23712f93354e45a1fb">name_in_</a>;
<a name="l00065"></a><a class="code" href="classelm_1_1LayerFeatTransf__TP__.html#a66d669d9887f4fab83353eacc6b1a33f">00065</a>     std::string <a class="code" href="classelm_1_1LayerFeatTransf__TP__.html#a66d669d9887f4fab83353eacc6b1a33f">name_out_</a>;
<a name="l00066"></a>00066 };
<a name="l00067"></a>00067 
<a name="l00068"></a>00068 <a class="code" href="serialization__assertions_8h.html#a083ac6a420c9d25eba7173f9903c965f">TYPED_TEST_CASE_P</a>(<a class="code" href="classelm_1_1LayerFeatTransf__TP__.html" title="A type-parameterized test case for repeating tests with different layer types derived from intermedia...">LayerFeatTransf_TP_</a>);
<a name="l00069"></a>00069 
<a name="l00070"></a><a class="code" href="namespaceelm.html#ac47226acf23833bc7b73435787a3d2f9">00070</a> <a class="code" href="namespaceelm.html#a8fc46887c8ceea0bd74418f1e8e4f91e">TYPED_TEST_P</a>(<a class="code" href="classelm_1_1LayerFeatTransf__TP__.html" title="A type-parameterized test case for repeating tests with different layer types derived from intermedia...">LayerFeatTransf_TP_</a>, Response_exists)
<a name="l00071"></a>00071 {
<a name="l00072"></a>00072     <a class="code" href="classelm_1_1Signal.html" title="The Signal class, a class for holding single and multiple samples of features.">Signal</a> sig;
<a name="l00073"></a>00073     sig.<a class="code" href="classelm_1_1Signal.html#aa0d2aa2304975cb658fb07d587d2dc79">Append</a>(this-&gt;name_in_, <a class="code" href="namespacecv.html#a9747ac59f97cbb93ddd719c4fb3e2d5d" title="convinience typedef for Mat of floats without constraints on no. of channels">cv::Mat1f</a>(10, 10, 1.f));
<a name="l00074"></a>00074 
<a name="l00075"></a>00075     this-&gt;layer_ptr_-&gt;Activate(sig);
<a name="l00076"></a>00076 
<a name="l00077"></a>00077     EXPECT_FALSE(sig.<a class="code" href="classelm_1_1Signal.html#adb661c150f2b0f69b21b3645beec366d">Exists</a>(this-&gt;name_out_));
<a name="l00078"></a>00078 
<a name="l00079"></a>00079     this-&gt;layer_ptr_-&gt;Response(sig);
<a name="l00080"></a>00080 
<a name="l00081"></a>00081     EXPECT_TRUE(sig.<a class="code" href="classelm_1_1Signal.html#adb661c150f2b0f69b21b3645beec366d">Exists</a>(this-&gt;name_out_));
<a name="l00082"></a>00082 }
<a name="l00083"></a>00083 
<a name="l00084"></a>00084 <span class="comment">/* Write additional type+value parameterized tests here.</span>
<a name="l00085"></a>00085 <span class="comment"> * Acquaint yourself with the values passed to along with each type.</span>
<a name="l00086"></a>00086 <span class="comment"> */</span>
<a name="l00087"></a>00087 
<a name="l00088"></a>00088 <span class="comment">// Register test names</span>
<a name="l00089"></a>00089 <a class="code" href="serialization__assertions_8h.html#aec7abc8a673bcbdbf15c80106db1d709" title="register additional typed_test_p (i.e. unit test) routines here">REGISTER_TYPED_TEST_CASE_P</a>(<a class="code" href="classelm_1_1LayerFeatTransf__TP__.html" title="A type-parameterized test case for repeating tests with different layer types derived from intermedia...">LayerFeatTransf_TP_</a>,
<a name="l00090"></a>00090                            Response_exists
<a name="l00091"></a>00091                            ); 
<a name="l00092"></a>00092 
<a name="l00095"></a><a class="code" href="layer__feat__transf__assertions_8h.html#aa8ec135dee3d543de19aa51356a7d2e4">00095</a> <span class="preprocessor">#define ELM_INSTANTIATE_LAYER_FEAT_TRANSF_TYPED_TEST_CASE_P(Layer) INSTANTIATE_TYPED_TEST_CASE_P(LayerFeatTransf_TP_ ## Layer ## _Test, LayerFeatTransf_TP_, Layer)</span>
<a name="l00096"></a>00096 <span class="preprocessor"></span>
<a name="l00097"></a>00097 } <span class="comment">// namespace elm</span>
<a name="l00098"></a>00098 
<a name="l00099"></a>00099 <span class="preprocessor">#endif // _ELM_TS_FEAT_TRANSF_LAYER_ASSERTIONS_H_</span>
</pre></div></div><!-- contents -->
</div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="layer__feat__transf__assertions_8h.html">layer_feat_transf_assertions.h</a>      </li>

    <li class="footer">Generated on Fri Jun 5 2015 19:35:11 for ELM Library by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.6.1 </li>
   </ul>
 </div>


</body>
</html>
